{
	email aleksandar.perak33@gmail.com
}

leadlock.org {
	tls {
		issuer acme {
			dir https://acme.zerossl.com/v2/DV90
			email aleksandar.perak33@gmail.com
		}
	}

	handle /api/* {
		reverse_proxy api:8000
	}

	handle /health* {
		reverse_proxy api:8000
	}

	header {
		X-Content-Type-Options nosniff
		X-Frame-Options DENY
		Referrer-Policy strict-origin-when-cross-origin
	}

	handle /assets/* {
		root * /srv/dashboard
		header Cache-Control "public, max-age=31536000, immutable"
		file_server
	}

	handle {
		root * /srv/dashboard
		header Cache-Control "no-cache"
		try_files {path} /index.html
		file_server
	}
}

api.leadlock.org {
	tls {
		issuer acme {
			dir https://acme.zerossl.com/v2/DV90
			email aleksandar.perak33@gmail.com
		}
	}

	reverse_proxy api:8000
}
