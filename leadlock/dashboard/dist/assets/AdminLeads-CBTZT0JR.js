import{r as s,j as a,L as b,a as N}from"./index-C6CvHDG0.js";import{a as A}from"./client-BPQvj84Y.js";import{a as k}from"./response-time-DYhTzzae.js";import{u as L}from"./useDebounce-CgSiU6vq.js";import{P as C}from"./Pagination-CRwjXeWQ.js";import{P as T}from"./PageHeader-BjaxPPSz.js";import{S as D}from"./SearchInput-BctKDIYz.js";import{T as E}from"./Tabs-DjzlUuxy.js";import{D as P}from"./DataTable-Cx3MEqq4.js";import{B as w}from"./Badge-GmErx7Do.js";import{C as F}from"./clock-_j4wTqy7.js";import"./search-DsstUW0V.js";import"./chevron-down-CVJYLub8.js";import"./chevron-up-CnMI-OlX.js";const v=e=>{switch(e){case"booked":case"completed":return"success";case"qualified":case"qualifying":return"info";case"new":case"intake_sent":return"warning";case"cold":case"dead":case"opted_out":return"danger";default:return"neutral"}},B=[{key:"name",label:"Name",render:(e,r)=>a.jsxs("span",{className:"font-medium text-gray-900",children:[r.first_name||"Unknown"," ",r.last_name||""]})},{key:"client_name",label:"Client",render:e=>a.jsx("span",{className:"text-gray-600",children:e||"—"})},{key:"phone_masked",label:"Phone",render:e=>a.jsx("span",{className:"font-mono text-gray-500",children:e||"—"})},{key:"source",label:"Source",render:e=>a.jsx("span",{className:"capitalize text-gray-600",children:(e||"").replace("_"," ")||"—"})},{key:"state",label:"Status",render:e=>a.jsx(w,{variant:v(e),size:"sm",children:(e||"").replace("_"," ")})},{key:"score",label:"Score",align:"right",render:e=>a.jsx("span",{className:"font-mono text-gray-600",children:e??"—"})},{key:"first_response_ms",label:"Response",render:e=>e?a.jsxs("span",{className:`text-xs font-mono font-medium flex items-center gap-1 ${k(e)}`,children:[a.jsx(F,{className:"w-3 h-3"}),(e/1e3).toFixed(1),"s"]}):a.jsx("span",{className:"text-xs text-gray-400",children:"—"})},{key:"created_at",label:"Date",render:e=>a.jsx("span",{className:"font-mono text-xs text-gray-400",children:e?new Date(e).toLocaleDateString():"—"})}];function W(){const[e,r]=s.useState([]),[u,h]=s.useState(0),[c,l]=s.useState(1),[x,f]=s.useState(1),[o,g]=s.useState("all"),[m,y]=s.useState(""),i=L(m,300),[S,p]=s.useState(!0);s.useEffect(()=>{(async()=>{p(!0);try{const t={page:c,per_page:N.ADMIN_LEADS};o!=="all"&&(t.state=o),i&&(t.search=i);const d=await A.getAdminLeads(t);r(d.leads||[]),h(d.total||0),f(d.pages||1)}catch(t){console.error("Failed to fetch admin leads:",t)}finally{p(!1)}})()},[c,o,i]);const j=n=>{y(n),l(1)},_=n=>{g(n),l(1)};return a.jsxs("div",{className:"bg-[#FAFAFA] min-h-screen",children:[a.jsx(T,{title:"All Leads",subtitle:`${u} total`,actions:a.jsx("div",{className:"w-72",children:a.jsx(D,{value:m,onChange:j,placeholder:"Search name, phone, client..."})})}),a.jsx(E,{tabs:b,activeId:o,onChange:_}),S?a.jsx("div",{className:"space-y-3",children:[...Array(5)].map((n,t)=>a.jsx("div",{className:"h-14 rounded-2xl bg-gray-100 animate-pulse"},t))}):a.jsx(P,{columns:B,data:e,emptyMessage:"No leads found"}),a.jsx(C,{page:c,pages:x,onChange:l})]})}export{W as default};
