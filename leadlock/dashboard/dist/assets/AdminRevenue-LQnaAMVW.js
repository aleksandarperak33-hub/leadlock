import{r as n,j as e,D as f,C as N}from"./index-BHeaMpcx.js";import{a as v}from"./client-CM7usSQg.js";import{P as R}from"./PageHeader-B70tmnmd.js";import{T as A}from"./Tabs-D_nwivGe.js";import{S as o}from"./StatCard-CoJTE6us.js";import{T as S}from"./trending-up-DpDefieV.js";const _=[{id:"30d",label:"30d"},{id:"90d",label:"90d"},{id:"12m",label:"12m"}],c=["bg-orange-500","bg-orange-400","bg-orange-300","bg-gray-400"];function E(){const[a,b]=n.useState(null),[i,p]=n.useState("30d"),[u,m]=n.useState(!0);if(n.useEffect(()=>{(async()=>{m(!0);try{const s=await v.getAdminRevenue(i);b(s)}catch(s){console.error("Failed to fetch revenue:",s)}finally{m(!1)}})()},[i]),u)return e.jsxs("div",{className:"bg-[#FAFAFA] min-h-screen space-y-6",children:[e.jsx("div",{className:"h-7 w-40 rounded-lg bg-gray-100 animate-pulse"}),e.jsx("div",{className:"grid grid-cols-3 gap-6",children:[...Array(3)].map((t,s)=>e.jsx("div",{className:"h-32 rounded-2xl bg-gray-100 animate-pulse"},s))}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-64 rounded-2xl bg-gray-100 animate-pulse"}),e.jsx("div",{className:"h-64 rounded-2xl bg-gray-100 animate-pulse"})]})]});const r=(a==null?void 0:a.total_mrr)||0,j=(a==null?void 0:a.mrr_by_tier)||{},g=(a==null?void 0:a.top_clients)||[],d=(a==null?void 0:a.total_paying_clients)||0,x=Object.entries(j).sort((t,s)=>s[1]-t[1]);return e.jsxs("div",{className:"bg-[#FAFAFA] min-h-screen",children:[e.jsx(R,{title:"Revenue",actions:e.jsx(A,{tabs:_,activeId:i,onChange:p})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(o,{label:"Total MRR",value:`$${r.toLocaleString()}`,deltaLabel:`${d} paying clients`,icon:f,color:"green"}),e.jsx(o,{label:"Annualized Revenue",value:`$${(r*12).toLocaleString()}`,deltaLabel:"projected ARR",icon:S,color:"brand"}),e.jsx(o,{label:"Avg Revenue per Client",value:`$${d>0?Math.round(r/d).toLocaleString():"0"}`,deltaLabel:"monthly revenue",icon:N,color:"brand"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200/50 rounded-2xl p-6 shadow-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-5",children:"MRR by Tier"}),e.jsxs("div",{className:"space-y-4",children:[x.map(([t,s],l)=>{const h=r>0?(s/r*100).toFixed(0):0,y=c[l]||c[c.length-1];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"text-sm font-medium capitalize text-gray-700",children:t}),e.jsxs("span",{className:"text-sm font-mono font-medium text-gray-900",children:["$",s.toLocaleString(),e.jsxs("span",{className:"text-gray-400 ml-1",children:["(",h,"%)"]})]})]}),e.jsx("div",{className:"w-full h-2 rounded-full bg-gray-100",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${y}`,style:{width:`${h}%`}})})]},t)}),x.length===0&&e.jsx("p",{className:"text-sm text-gray-400",children:"No tier data"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200/50 rounded-2xl p-6 shadow-card",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-5",children:"Top Clients by Revenue"}),e.jsxs("div",{className:"space-y-0.5",children:[g.map((t,s)=>{var l;return e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-7 h-7 rounded-full bg-gray-100 flex items-center justify-center text-xs font-mono font-semibold text-gray-500",children:s+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.business_name}),e.jsxs("p",{className:"text-xs capitalize text-gray-400",children:[t.trade_type," Â· ",t.tier]})]})]}),e.jsxs("span",{className:"text-sm font-mono font-semibold text-gray-900",children:["$",((l=t.mrr)==null?void 0:l.toLocaleString())||"0"]})]},t.id||s)}),g.length===0&&e.jsx("p",{className:"text-sm text-gray-400",children:"No revenue data"})]})]})]})]})}export{E as default};
