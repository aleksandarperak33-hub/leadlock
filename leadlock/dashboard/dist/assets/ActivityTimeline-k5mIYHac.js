import{r as c,j as e}from"./index-C6CvHDG0.js";import{a as j}from"./client-BPQvj84Y.js";import{B as v}from"./Badge-GmErx7Do.js";const w=50,S=50,_=3e4,T={success:"success",failure:"danger",failed:"danger",error:"danger",skipped:"neutral",completed:"success",pending:"neutral",processing:"info"},L={purple:"bg-purple-500",blue:"bg-blue-500",amber:"bg-amber-500",green:"bg-green-500",cyan:"bg-cyan-500",red:"bg-red-500",pink:"bg-pink-500",indigo:"bg-indigo-500",emerald:"bg-emerald-500",sky:"bg-sky-500",lime:"bg-lime-500",orange:"bg-orange-500",stone:"bg-stone-500",violet:"bg-violet-500",gray:"bg-gray-500"};function D(s){const t={};for(const n of s){const i=n.created_at?n.created_at.slice(0,10):"unknown";t[i]||(t[i]=[]),t[i].push(n)}return t}function E(s){const t=new Date(s+"T00:00:00"),n=new Date,i=n.toISOString().slice(0,10),o=new Date(n);o.setDate(o.getDate()-1);const u=o.toISOString().slice(0,10);return s===i?"Today":s===u?"Yesterday":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function R(s){if(!s)return"";const t=(Date.now()-new Date(s).getTime())/1e3;return t<60?`${Math.round(t)}s ago`:t<3600?`${Math.round(t/60)}m ago`:t<86400?`${Math.round(t/3600)}h ago`:`${Math.round(t/86400)}d ago`}function k(s){return s==null||s===0?null:`$${Number(s).toFixed(4)}`}function C(){const[s,t]=c.useState([]),[n,i]=c.useState(w),[o,u]=c.useState(!0),[m,g]=c.useState(null),[y,h]=c.useState(0),x=c.useRef(null);c.useEffect(()=>{let a=!1;async function l(){var r;try{const d=await j.getActivityFeed({limit:String(n)});a||(t(((r=d.data)==null?void 0:r.events)||[]),g(null))}catch(d){a||g(d.message||"Failed to load activity")}finally{a||u(!1)}}return l(),x.current=setInterval(l,_),()=>{a=!0,clearInterval(x.current)}},[n,y]);const p=D(s),b=Object.keys(p);return o?e.jsx("div",{className:"space-y-4 animate-pulse",children:[...Array(5)].map((a,l)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-gray-200"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded-lg flex-1"})]},l))}):m?e.jsxs("div",{className:"glass-card p-6 text-center",children:[e.jsx("p",{className:"text-red-600 text-sm mb-2",children:m}),e.jsx("button",{onClick:()=>h(a=>a+1),className:"text-sm text-orange-600 hover:underline",children:"Retry"})]}):s.length===0?e.jsx("p",{className:"text-sm text-gray-400 text-center py-8",children:"No recent activity"}):e.jsxs("div",{className:"space-y-6",children:[b.map(a=>{const l=E(a);return e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:l}),e.jsxs("div",{className:"relative pl-5",children:[e.jsx("div",{className:"absolute left-[4.5px] top-1 bottom-1 w-px bg-gray-200"}),e.jsx("div",{className:"space-y-3",children:p[a].map((r,d)=>{const N=L[r.agent_color]||"bg-gray-400",f=k(r.cost_usd);return e.jsxs("div",{className:"relative flex items-start gap-3",children:[e.jsx("div",{className:`absolute -left-5 top-1.5 w-2.5 h-2.5 rounded-full ring-2 ring-white ${N}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:r.agent_display_name}),e.jsx("span",{className:"text-sm text-gray-500",children:r.action}),e.jsx(v,{variant:T[r.status]||"neutral",size:"sm",children:r.status}),f&&e.jsx("span",{className:"text-[11px] font-mono text-gray-400",children:f}),e.jsx("span",{className:"text-xs text-gray-400 ml-auto whitespace-nowrap",children:R(r.created_at)})]}),r.message&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:r.message})]})]},r.id||d)})})]})]},a)}),e.jsx("div",{className:"text-center pt-2",children:e.jsx("button",{type:"button",onClick:()=>i(a=>a+S),className:"text-sm text-orange-500 hover:text-orange-600 font-medium cursor-pointer transition-colors",children:"Load more"})})]})}export{C as default};
