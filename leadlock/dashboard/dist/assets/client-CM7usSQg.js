import{A as d}from"./index-BHeaMpcx.js";const S="/api/v1/dashboard",y="/api/v1/admin",$="/api/v1/sales",P=1e4;function T(){Object.values(d).forEach(e=>localStorage.removeItem(e)),window.location.href="/login"}function g(e){return async function(o,m={}){const p=localStorage.getItem(d.TOKEN),l=new AbortController,h=setTimeout(()=>l.abort(),P);try{const n=await fetch(`${e}${o}`,{...m,signal:l.signal,headers:{"Content-Type":"application/json",...p?{Authorization:`Bearer ${p}`}:{},...m.headers}});if(n.status===401)throw console.warn("API returned 401, clearing session"),T(),new Error("Unauthorized");if(n.status===403)throw new Error("Admin access required");if(!n.ok){const u=await n.json().catch(()=>({detail:"Request failed"}));throw new Error(u.detail||`HTTP ${n.status}`)}return n.json()}finally{clearTimeout(h)}}}const f="/api/v1/analytics",O="/api/v1/agents",a=g(S),r=g(y),s=g($),i=g(f),c=g(O),A={login:(e,t)=>fetch("/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(o=>{if(!o.ok)throw new Error("Invalid credentials");return o.json()}),getMetrics:(e="7d")=>a(`/metrics?period=${e}`),getLeads:(e={})=>{const t=new URLSearchParams(e).toString();return a(`/leads?${t}`)},getLead:e=>a(`/leads/${e}`),getConversations:e=>a(`/leads/${e}/conversations`),getActivity:(e=50)=>a(`/activity?limit=${e}`),getWeeklyReport:e=>a(`/reports/weekly${e?`?week=${e}`:""}`),getSettings:()=>a("/settings"),updateSettings:e=>a("/settings",{method:"PUT",body:JSON.stringify(e)}),getComplianceSummary:()=>a("/compliance/summary"),updateLeadStatus:(e,t)=>a(`/leads/${e}/status`,{method:"PUT",body:JSON.stringify({status:t})}),archiveLead:(e,t)=>a(`/leads/${e}/archive`,{method:"PUT",body:JSON.stringify({archived:t})}),updateLeadTags:(e,t)=>a(`/leads/${e}/tags`,{method:"PUT",body:JSON.stringify({tags:t})}),updateLeadNotes:(e,t)=>a(`/leads/${e}/notes`,{method:"PUT",body:JSON.stringify({notes:t})}),sendReply:(e,t)=>a(`/leads/${e}/reply`,{method:"POST",body:JSON.stringify({message:t})}),getBookings:(e={})=>{const t=new URLSearchParams(e).toString();return a(`/bookings?${t}`)},getCustomReport:(e,t)=>a(`/reports/custom?start=${e}&end=${t}`),exportLeadsCSV:()=>{const e=localStorage.getItem(d.TOKEN);return fetch(`${S}/leads/export?format=csv`,{headers:e?{Authorization:`Bearer ${e}`}:{}}).then(t=>{if(!t.ok)throw new Error("Export failed");return t.blob()})},getComplianceDetails:e=>a(`/compliance/details?type=${e}`),getAdminOverview:()=>r("/overview"),getAdminClients:(e={})=>{const t=new URLSearchParams(e).toString();return r(`/clients?${t}`)},getAdminClient:e=>r(`/clients/${e}`),getAdminLeads:(e={})=>{const t=new URLSearchParams(e).toString();return r(`/leads?${t}`)},getAdminRevenue:(e="30d")=>r(`/revenue?period=${e}`),getAdminHealth:()=>r("/health"),getAdminOutreach:(e={})=>{const t=new URLSearchParams(e).toString();return r(`/outreach?${t}`)},createOutreach:e=>r("/outreach",{method:"POST",body:JSON.stringify(e)}),updateOutreach:(e,t)=>r(`/outreach/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteOutreach:e=>r(`/outreach/${e}`,{method:"DELETE"}),convertOutreach:e=>r(`/outreach/${e}/convert`,{method:"POST"}),createAdminClient:e=>r("/clients",{method:"POST",body:JSON.stringify(e)}),getSalesConfig:()=>s("/config"),updateSalesConfig:e=>s("/config",{method:"PUT",body:JSON.stringify(e)}),getSalesMetrics:(e="30d")=>s(`/metrics?period=${e}`),getScrapeJobs:(e=1)=>s(`/scrape-jobs?page=${e}`),triggerScrapeJob:e=>s("/scrape-jobs",{method:"POST",body:JSON.stringify(e)}),getProspects:(e={})=>{const t=new URLSearchParams(e).toString();return s(`/prospects?${t}`)},getProspect:e=>s(`/prospects/${e}`),updateProspect:(e,t)=>s(`/prospects/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteProspect:e=>s(`/prospects/${e}`,{method:"DELETE"}),createProspect:e=>s("/prospects",{method:"POST",body:JSON.stringify(e)}),blacklistProspect:e=>s(`/prospects/${e}/blacklist`,{method:"POST"}),getProspectEmails:e=>s(`/prospects/${e}/emails`),getWorkerStatus:()=>s("/worker-status"),pauseWorker:e=>s(`/workers/${e}/pause`,{method:"POST"}),resumeWorker:e=>s(`/workers/${e}/resume`,{method:"POST"}),getCampaigns:(e={})=>{const t=new URLSearchParams(e).toString();return s(`/campaigns?${t}`)},getCampaign:e=>s(`/campaigns/${e}`),createCampaign:e=>s("/campaigns",{method:"POST",body:JSON.stringify(e)}),updateCampaign:(e,t)=>s(`/campaigns/${e}`,{method:"PUT",body:JSON.stringify(t)}),pauseCampaign:e=>s(`/campaigns/${e}/pause`,{method:"POST"}),resumeCampaign:e=>s(`/campaigns/${e}/resume`,{method:"POST"}),getCampaignDetail:e=>s(`/campaigns/${e}/detail`),getCampaignProspects:(e,t={})=>{const o=new URLSearchParams(t).toString();return s(`/campaigns/${e}/prospects?${o}`)},activateCampaign:e=>s(`/campaigns/${e}/activate`,{method:"POST"}),assignProspects:(e,t)=>s(`/campaigns/${e}/assign-prospects`,{method:"POST",body:JSON.stringify(t)}),getCampaignMetrics:e=>s(`/campaigns/${e}/metrics`),getInbox:(e={})=>{const t=new URLSearchParams(e).toString();return s(`/inbox?${t}`)},getInboxThread:e=>s(`/inbox/${e}/thread`),getTemplates:()=>s("/templates"),createTemplate:e=>s("/templates",{method:"POST",body:JSON.stringify(e)}),updateTemplate:(e,t)=>s(`/templates/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteTemplate:e=>s(`/templates/${e}`,{method:"DELETE"}),getCommandCenter:()=>s("/command-center"),getInsights:()=>s("/insights"),bulkUpdateProspects:e=>s("/prospects/bulk",{method:"POST",body:JSON.stringify(e)}),getAnalyticsFunnel:e=>i(`/funnel${e?`?trade=${e}`:""}`),getAnalyticsCostPerLead:e=>i(`/cost-per-lead${e?`?trade=${e}`:""}`),getAnalyticsEmailPerf:()=>i("/email-performance"),getAnalyticsAbTests:()=>i("/ab-tests"),getAnalyticsPipeline:()=>i("/pipeline"),getAnalyticsAgentCosts:(e=7)=>i(`/agent-costs?days=${e}`),getAgentFleet:()=>c("/fleet"),getAgentActivity:(e,t=20)=>c(`/${e}/activity?limit=${t}`),getAgentTasks:(e={})=>{const t=new URLSearchParams(e).toString();return c(`/tasks?${t}`)},getAgentCosts:(e="7d")=>c(`/costs?period=${e}`),getSystemMap:()=>c("/system-map"),getActivityFeed:(e={})=>{const t=new URLSearchParams(e).toString();return c(`/activity-feed?${t}`)}};export{A as a};
