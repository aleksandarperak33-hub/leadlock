import{b as h,u as b,r as o,j as e,U as f,d as j,T as y}from"./index-C6CvHDG0.js";import{a as v}from"./client-BPQvj84Y.js";import{S as c}from"./StatCard-D4v_MXBs.js";import{B as d}from"./Badge-GmErx7Do.js";import{D as _}from"./DataTable-Cx3MEqq4.js";import{A as N}from"./arrow-left-x6XvEO_x.js";import{C as w}from"./clock-_j4wTqy7.js";import"./chevron-down-CVJYLub8.js";import"./chevron-up-CnMI-OlX.js";const k=a=>{switch(a){case"booked":case"completed":return"success";case"qualified":case"qualifying":return"info";case"new":case"intake_sent":return"warning";case"cold":case"dead":case"opted_out":return"danger";default:return"neutral"}},C=a=>{switch(a){case"active":return"success";case"trial":return"info";case"past_due":return"warning";case"cancelled":return"danger";default:return"neutral"}},A=[{key:"name",label:"Name",render:(a,n)=>e.jsxs("span",{className:"font-medium text-gray-900",children:[n.first_name||"Unknown"," ",n.last_name||""]})},{key:"phone_masked",label:"Phone",render:a=>e.jsx("span",{className:"font-mono text-gray-500",children:a||"—"})},{key:"source",label:"Source",render:a=>e.jsx("span",{className:"capitalize text-gray-600",children:(a||"").replace("_"," ")||"—"})},{key:"state",label:"Status",render:a=>e.jsx(d,{variant:k(a),size:"sm",children:(a||"").replace("_"," ")})},{key:"score",label:"Score",align:"right",render:a=>e.jsx("span",{className:"font-mono text-gray-600",children:a??"—"})},{key:"created_at",label:"Date",render:a=>e.jsx("span",{className:"font-mono text-xs text-gray-400",children:a?new Date(a).toLocaleDateString():"—"})}];function R(){const{clientId:a}=h(),n=b(),[l,m]=o.useState(null),[u,x]=o.useState(!0);if(o.useEffect(()=>{(async()=>{try{const t=await v.getAdminClient(a);m(t)}catch(t){console.error("Failed to fetch client:",t)}finally{x(!1)}})()},[a]),u)return e.jsxs("div",{className:"bg-[#FAFAFA] min-h-screen space-y-6",children:[e.jsx("div",{className:"h-6 w-48 bg-gray-100 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-40 bg-gray-100 rounded-2xl animate-pulse"}),e.jsx("div",{className:"grid grid-cols-4 gap-6",children:[...Array(4)].map((i,t)=>e.jsx("div",{className:"h-32 rounded-2xl bg-gray-100 animate-pulse"},t))})]});if(!l)return e.jsxs("div",{className:"bg-[#FAFAFA] min-h-screen flex flex-col items-center justify-center py-20",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Client not found"}),e.jsx("button",{onClick:()=>n("/clients"),className:"text-sm text-orange-500 hover:text-orange-600 cursor-pointer font-medium",children:"Back to clients"})]});const s=l.client||{},r=l.metrics||{},g=l.recent_leads||[],p=[{label:"Email",value:s.owner_email||s.dashboard_email||"—"},{label:"Phone",value:s.owner_phone||s.twilio_phone||"—"},{label:"Twilio Phone",value:s.twilio_phone||"—"},{label:"10DLC Status",value:s.ten_dlc_status||"pending"},{label:"CRM Type",value:s.crm_type||"—"},{label:"Created",value:s.created_at?new Date(s.created_at).toLocaleDateString():"—"}];return e.jsxs("div",{className:"bg-[#FAFAFA] min-h-screen",children:[e.jsxs("button",{onClick:()=>n("/clients"),className:"flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700 cursor-pointer mb-6 transition-colors",children:[e.jsx(N,{className:"w-4 h-4"}),"Back to Clients"]}),e.jsxs("div",{className:"bg-white border border-gray-200/50 rounded-2xl p-6 shadow-card mb-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:s.business_name}),e.jsx("p",{className:"text-sm text-gray-500 capitalize mt-0.5",children:s.trade_type||"Unknown trade"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:F(s.tier),size:"md",children:s.tier||"none"}),e.jsx(d,{variant:C(s.billing_status),size:"md",children:(s.billing_status||"unknown").replace("_"," ")})]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 pt-4 border-t border-gray-100",children:p.map(({label:i,value:t})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:i}),e.jsx("p",{className:"text-sm font-mono mt-1 capitalize text-gray-700",children:t})]},i))})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(c,{label:"Total Leads",value:r.total_leads??"—",icon:f,color:"brand"}),e.jsx(c,{label:"Booked",value:r.total_booked??"—",icon:j,color:"green"}),e.jsx(c,{label:"Avg Response",value:r.avg_response_ms?`${(r.avg_response_ms/1e3).toFixed(1)}s`:"—",icon:w,color:"yellow"}),e.jsx(c,{label:"Conversion %",value:r.conversion_rate!=null?`${(r.conversion_rate*100).toFixed(1)}%`:"—",icon:y,color:"brand"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Leads"}),e.jsx(_,{columns:A,data:g,emptyMessage:"No leads yet"})]})]})}function F(a){switch(a){case"enterprise":return"warning";case"scale":return"info";case"growth":return"success";case"starter":return"neutral";default:return"neutral"}}export{R as default};
