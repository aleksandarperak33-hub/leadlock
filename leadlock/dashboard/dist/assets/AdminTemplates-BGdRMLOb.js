import{c as T,r as n,j as e,F as b,X as C}from"./index-C6CvHDG0.js";import{a as u}from"./client-BPQvj84Y.js";import{P as S}from"./PageHeader-BjaxPPSz.js";import{B as y}from"./Badge-GmErx7Do.js";import{E}from"./EmptyState-BehFkc_W.js";import{P as j}from"./plus-B9y6rJTQ.js";import{S as F}from"./sparkles-CsJ9SWXp.js";import{T as A}from"./trash-2-CBmtFmOa.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=T("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),P=["first_contact","followup","breakup","custom"],p={name:"",step_type:"first_contact",subject_template:"",body_template:"",ai_instructions:"",is_ai_generated:!0};function z({form:t,editing:o,onChange:a,onSave:l,onClose:i}){return e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200/50",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:o?"Edit Template":"Create Template"}),e.jsx("button",{onClick:i,className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:e.jsx(C,{className:"w-4 h-4 text-gray-400"})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1.5",children:"Template Name"}),e.jsx("input",{type:"text",value:t.name,onChange:r=>a({...t,name:r.target.value}),className:"w-full px-3 py-2.5 bg-white border border-gray-200 rounded-xl text-sm text-gray-900 placeholder:text-gray-400 outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-100 transition-shadow",placeholder:"HVAC Step 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1.5",children:"Step Type"}),e.jsx("select",{value:t.step_type,onChange:r=>a({...t,step_type:r.target.value}),className:"w-full px-3 py-2.5 bg-white border border-gray-200 rounded-xl text-sm text-gray-900 outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-100 transition-shadow cursor-pointer",children:P.map(r=>e.jsx("option",{value:r,children:r.replace(/_/g," ")},r))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1.5",children:"Subject Template"}),e.jsx("input",{type:"text",value:t.subject_template,onChange:r=>a({...t,subject_template:r.target.value}),className:"w-full px-3 py-2.5 bg-white border border-gray-200 rounded-xl text-sm text-gray-900 placeholder:text-gray-400 outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-100 transition-shadow",placeholder:"Quick question about {{company_name}}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1.5",children:"Body Template"}),e.jsx("textarea",{value:t.body_template,onChange:r=>a({...t,body_template:r.target.value}),className:"w-full px-3 py-2.5 bg-white border border-gray-200 rounded-xl text-sm text-gray-900 placeholder:text-gray-400 outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-100 transition-shadow h-32 resize-none font-mono",placeholder:`Hi {{prospect_name}},

I noticed...`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider mb-1.5",children:"AI Instructions (optional)"}),e.jsx("textarea",{value:t.ai_instructions,onChange:r=>a({...t,ai_instructions:r.target.value}),className:"w-full px-3 py-2.5 bg-white border border-gray-200 rounded-xl text-sm text-gray-900 placeholder:text-gray-400 outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-100 transition-shadow h-20 resize-none",placeholder:"Focus on speed-to-lead pain point. Mention their Google rating."})]}),e.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.is_ai_generated,onChange:r=>a({...t,is_ai_generated:r.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-orange-500 focus:ring-orange-500 cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-700",children:"AI-generated (uses template as guidance)"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 px-6 py-4 border-t border-gray-200/50",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 rounded-xl text-sm font-medium text-gray-500 bg-white border border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer",children:"Cancel"}),e.jsx("button",{onClick:l,disabled:!t.name,className:"px-4 py-2 rounded-xl text-sm font-medium text-white bg-orange-500 hover:bg-orange-600 disabled:opacity-50 transition-colors cursor-pointer",children:o?"Update":"Create"})]})]})})}function L({template:t,onEdit:o,onDelete:a}){var l;return e.jsx("div",{className:"bg-white border border-gray-200/50 rounded-xl p-5 mb-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:t.name}),e.jsx(y,{variant:"info",children:(l=t.step_type)==null?void 0:l.replace(/_/g," ")}),t.is_ai_generated&&e.jsxs(y,{variant:"info",children:[e.jsx(F,{className:"w-3 h-3 mr-1"})," AI"]})]}),t.subject_template&&e.jsxs("p",{className:"text-sm text-gray-500 truncate font-mono",children:["Subject: ",t.subject_template]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 ml-4 shrink-0",children:[e.jsx("button",{onClick:()=>o(t),className:"p-2 rounded-xl bg-white border border-gray-200/50 hover:bg-gray-50 transition-colors cursor-pointer",children:e.jsx(I,{className:"w-3.5 h-3.5 text-gray-400"})}),e.jsx("button",{onClick:()=>a(t.id),className:"p-2 rounded-xl bg-white border border-gray-200/50 hover:bg-red-50 transition-colors cursor-pointer",children:e.jsx(A,{className:"w-3.5 h-3.5 text-red-400"})})]})]})})}function O(){const[t,o]=n.useState([]),[a,l]=n.useState(!0),[i,r]=n.useState(null),[f,c]=n.useState(!1),[g,x]=n.useState(null),[h,d]=n.useState(p);n.useEffect(()=>{m()},[]);const m=async()=>{try{r(null);const s=await u.getTemplates();o(s.templates||[])}catch{r("Failed to load templates.")}finally{l(!1)}},w=async()=>{try{g?await u.updateTemplate(g.id,h):await u.createTemplate(h),c(!1),x(null),d(p),m()}catch(s){console.error("Failed to save template:",s)}},N=s=>{x(s),d({name:s.name,step_type:s.step_type,subject_template:s.subject_template||"",body_template:s.body_template||"",ai_instructions:s.ai_instructions||"",is_ai_generated:s.is_ai_generated}),c(!0)},v=async s=>{try{await u.deleteTemplate(s),m()}catch(k){console.error("Failed to delete template:",k)}},_=()=>{c(!1),x(null),d(p)};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA]",children:[e.jsx(S,{title:"Email Templates",subtitle:`${t.length} template${t.length!==1?"s":""}`,actions:e.jsxs("button",{onClick:()=>{x(null),d(p),c(!0)},className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium text-white bg-orange-500 hover:bg-orange-600 transition-colors cursor-pointer",children:[e.jsx(j,{className:"w-4 h-4"})," New Template"]})}),i&&e.jsxs("div",{className:"mb-4 flex items-center gap-3 px-4 py-3 rounded-xl bg-red-50 border border-red-200/60",children:[e.jsx(b,{className:"w-4 h-4 text-red-500 shrink-0"}),e.jsx("p",{className:"text-sm text-red-700 flex-1",children:i}),e.jsx("button",{onClick:m,className:"text-xs font-medium text-red-600 hover:text-red-800 cursor-pointer",children:"Retry"})]}),f&&e.jsx(z,{form:h,editing:g,onChange:d,onSave:w,onClose:_}),t.length===0?e.jsx("div",{className:"bg-white border border-gray-200/50 rounded-2xl shadow-card",children:e.jsx(E,{icon:b,title:"No templates yet",description:"Create templates to customize your outreach emails.",action:e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium text-white bg-orange-500 hover:bg-orange-600 transition-colors cursor-pointer",children:[e.jsx(j,{className:"w-4 h-4"})," Create Template"]})})}):e.jsx("div",{children:t.map(s=>e.jsx(L,{template:s,onEdit:N,onDelete:v},s.id))})]})}export{O as default};
