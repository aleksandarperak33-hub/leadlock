import{c as b,r as l,j as e,C as y,T as j}from"./index-C6CvHDG0.js";import{a as f}from"./client-BPQvj84Y.js";import{P as _}from"./PageHeader-BjaxPPSz.js";import{E as N}from"./EmptyState-BehFkc_W.js";import{T as v}from"./target-iFJKvwWf.js";import{C as w}from"./clock-_j4wTqy7.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=b("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);function i({label:s,value:a,count:r}){const n=Math.round((a??0)*100);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-700 capitalize w-32 shrink-0",children:s}),e.jsx("div",{className:"flex-1 h-3 rounded-full overflow-hidden bg-orange-100",children:e.jsx("div",{className:"h-full bg-orange-500 rounded-full transition-all duration-500",style:{width:`${Math.max(n,2)}%`}})}),e.jsxs("span",{className:"text-sm font-mono text-gray-900 w-14 text-right",children:[n,"%"]}),e.jsxs("span",{className:"text-xs text-gray-400 w-14 text-right font-mono",children:["n=",r]})]})}function d({title:s,icon:a,children:r}){return e.jsxs("div",{className:"bg-white border border-gray-200/50 rounded-2xl p-6 shadow-card mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:e.jsx(a,{className:"w-4 h-4 text-orange-500"})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s})]}),r]})}function E(){var h,p,m,u;const[s,a]=l.useState(null),[r,n]=l.useState(!0),[o,c]=l.useState(null);l.useEffect(()=>{x()},[]);const x=async()=>{try{c(null);const t=await f.getInsights();a(t)}catch{c("Failed to load insights. The insights engine may still be collecting data.")}finally{n(!1)}};return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA]",children:[e.jsx(_,{title:"Insights",subtitle:`${(s==null?void 0:s.total_signals)||0} signals collected (last 30 days)`}),o&&e.jsxs("div",{className:"mb-4 flex items-center gap-3 px-4 py-3 rounded-xl bg-red-50 border border-red-200/60",children:[e.jsx(g,{className:"w-4 h-4 text-red-500 shrink-0"}),e.jsx("p",{className:"text-sm text-red-700 flex-1",children:o}),e.jsx("button",{onClick:x,className:"text-xs font-medium text-red-600 hover:text-red-800 cursor-pointer",children:"Retry"})]}),!s||s.total_signals===0?e.jsx("div",{className:"bg-white border border-gray-200/50 rounded-2xl shadow-card",children:e.jsx(N,{icon:g,title:"No insights yet",description:"Insights will populate as emails are sent and engagement is tracked."})}):e.jsxs("div",{children:[((h=s.open_rate_by_trade)==null?void 0:h.length)>0&&e.jsx(d,{title:"Open Rate by Trade",icon:v,children:e.jsx("div",{className:"space-y-3",children:s.open_rate_by_trade.map(t=>e.jsx(i,{label:t.trade,value:t.open_rate,count:t.count},t.trade))})}),((p=s.open_rate_by_time)==null?void 0:p.length)>0&&e.jsx(d,{title:"Best Send Times",icon:w,children:e.jsx("div",{className:"space-y-3",children:s.open_rate_by_time.map(t=>e.jsx(i,{label:t.time_bucket,value:t.open_rate,count:t.count},t.time_bucket))})}),((m=s.open_rate_by_step)==null?void 0:m.length)>0&&e.jsx(d,{title:"Open Rate by Step",icon:y,children:e.jsx("div",{className:"space-y-3",children:s.open_rate_by_step.map(t=>e.jsx(i,{label:`Step ${t.step}`,value:t.open_rate,count:t.count},t.step))})}),((u=s.reply_rate_by_trade)==null?void 0:u.length)>0&&e.jsx(d,{title:"Reply Rate by Trade",icon:j,children:e.jsx("div",{className:"space-y-3",children:s.reply_rate_by_trade.map(t=>e.jsx(i,{label:t.trade,value:t.reply_rate,count:t.count},t.trade))})})]})]})}export{E as default};
